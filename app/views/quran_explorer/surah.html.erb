<div class="tw-min-h-screen tw-bg-gray-50">
  <div class="tw-max-w-7xl tw-mx-auto tw-px-4 tw-py-8">
    <!-- Breadcrumb -->
    <nav class="tw-mb-6">
      <%= link_to quran_explorer_path, class: "tw-text-blue-600 hover:tw-text-blue-800" do %>
        Explorer
      <% end %>
      <span class="tw-mx-2 tw-text-gray-400">/</span>
      <span class="tw-text-gray-600">Surah <%= @chapter.chapter_number %></span>
    </nav>

    <!-- Header -->
    <div class="tw-bg-white tw-rounded-lg tw-shadow-md tw-p-8 tw-mb-8">
      <div class="tw-text-center tw-mb-6">
        <h1 class="tw-text-4xl tw-font-bold tw-text-gray-900 tw-mb-2">
          <%= @chapter.name_simple %>
        </h1>
        <div class="tw-text-4xl tw-text-gray-700 tw-mb-4" dir="rtl">
          <%= @chapter.name_arabic %>
        </div>
        <p class="tw-text-lg tw-text-gray-600">
          Surah <%= @chapter.chapter_number %> • 
          <%= @chapter.revelation_place.capitalize %> • 
          Revelation Order: <%= @chapter.revelation_order %>
        </p>
      </div>

      <!-- Navigation -->
      <div class="tw-flex tw-justify-center tw-gap-4 tw-mb-6">
        <% if @chapter.chapter_number > 1 %>
          <% prev_chapter = Chapter.find_by(chapter_number: @chapter.chapter_number - 1) %>
          <%= link_to quran_explorer_surah_path(prev_chapter.chapter_number), 
                      class: "tw-bg-gray-200 hover:tw-bg-gray-300 tw-px-4 tw-py-2 tw-rounded tw-text-sm tw-shadow-sm" do %>
            ← <%= prev_chapter.name_simple %>
          <% end %>
        <% end %>
        
        <%= link_to quran_explorer_path, 
                    class: "tw-bg-blue-600 hover:tw-bg-blue-700 tw-text-white tw-px-4 tw-py-2 tw-rounded tw-text-sm tw-shadow-sm" do %>
          All Surahs
        <% end %>
        
        <% if @chapter.chapter_number < 114 %>
          <% next_chapter = Chapter.find_by(chapter_number: @chapter.chapter_number + 1) %>
          <%= link_to quran_explorer_surah_path(next_chapter.chapter_number), 
                      class: "tw-bg-gray-200 hover:tw-bg-gray-300 tw-px-4 tw-py-2 tw-rounded tw-text-sm tw-shadow-sm" do %>
            <%= next_chapter.name_simple %> →
          <% end %>
        <% end %>
      </div>

      <!-- Statistics -->
      <div class="tw-grid tw-grid-cols-2 md:tw-grid-cols-4 tw-gap-4">
        <div class="tw-text-center tw-p-4 tw-bg-blue-50 tw-rounded-lg">
          <div class="tw-text-2xl tw-font-bold tw-text-blue-600"><%= @stats[:verses_count] %></div>
          <div class="tw-text-sm tw-text-gray-600">Verses</div>
        </div>
        <div class="tw-text-center tw-p-4 tw-bg-green-50 tw-rounded-lg">
          <div class="tw-text-2xl tw-font-bold tw-text-green-600"><%= @stats[:words_count] %></div>
          <div class="tw-text-sm tw-text-gray-600">Words</div>
        </div>
        <div class="tw-text-center tw-p-4 tw-bg-purple-50 tw-rounded-lg">
          <div class="tw-text-2xl tw-font-bold tw-text-purple-600"><%= @stats[:rukus_count] || 'N/A' %></div>
          <div class="tw-text-sm tw-text-gray-600">Rukus</div>
        </div>
        <div class="tw-text-center tw-p-4 tw-bg-yellow-50 tw-rounded-lg">
          <div class="tw-text-2xl tw-font-bold tw-text-yellow-600">
            <%= @stats[:pages].is_a?(Array) ? @stats[:pages].join(', ') : (@stats[:pages] || 'N/A') %>
          </div>
          <div class="tw-text-sm tw-text-gray-600">Pages</div>
        </div>
      </div>
    </div>

    <!-- Chapter Information -->
    <% if @chapter_info %>
      <div class="tw-bg-white tw-rounded-lg tw-shadow-md tw-p-6 tw-mb-8">
        <h2 class="tw-text-2xl tw-font-bold tw-text-gray-900 tw-mb-4">About This Surah</h2>
        <% if @chapter_info.short_text.present? %>
          <div class="tw-text-gray-700 tw-mb-4">
            <%= simple_format(@chapter_info.short_text) %>
          </div>
        <% end %>
        <% if @chapter_info.text.present? %>
          <div class="tw-text-gray-700 prose tw-max-w-none">
            <%= raw(@chapter_info.text) %>
          </div>
        <% end %>
      </div>
    <% end %>

    <!-- Verses -->
    <div class="tw-bg-white tw-rounded-lg tw-shadow-md tw-overflow-hidden">
      <div class="tw-px-6 tw-py-4 tw-border-b tw-bg-gray-50">
        <h2 class="tw-text-2xl tw-font-bold tw-text-gray-900">Verses</h2>
        <p class="tw-text-gray-600 tw-mt-1">Click on any verse to explore its detailed view</p>
      </div>
      
      <div class="tw-divide-y tw-divide-gray-200">
        <% @chapter.verses.each do |verse| %>
          <%= link_to quran_explorer_ayah_path(@chapter.chapter_number, verse.verse_number), 
                      class: "tw-block tw-p-6 hover:tw-bg-gray-50 tw-transition-colors tw-duration-200" do %>
            <div class="tw-flex tw-items-start tw-gap-4">
              <div class="tw-flex-shrink-0 tw-w-12 tw-h-12 tw-bg-blue-100 tw-rounded-full tw-flex tw-items-center tw-justify-center">
                <span class="tw-text-blue-600 tw-font-semibold"><%= verse.verse_number %></span>
              </div>
              
              <div class="tw-flex-1 tw-min-w-0">
                <div class="tw-text-2xl tw-text-gray-900 tw-mb-3 tw-leading-relaxed" dir="rtl">
                  <%= verse.text_qpc_hafs %>
                </div>
                
                <% if verse.translation&.text.present? %>
                  <div class="tw-text-gray-700 tw-italic">
                    <%= verse.translation.text %>
                  </div>
                <% end %>
                
                <div class="tw-mt-2 tw-text-sm tw-text-gray-500">
                  Verse <%= verse.verse_number %> • <%= verse.words_count %> words
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
      
      <% if @chapter.verses_count > 10 %>
        <div class="tw-px-6 tw-py-4 tw-bg-gray-50 tw-text-center">
          <span class="tw-text-gray-600">Showing first 10 verses</span>
        </div>
      <% end %>
    </div>
  </div>
</div>