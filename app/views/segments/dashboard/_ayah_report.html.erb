<div class="page-wrapper container-lg mt-4">
  <div class="page-section filters">
    <%= form_with url: segments_ayah_report_path, method: :get, class: "tw-flex tw-gap-4 tw-mb-6" do %>
      <div>
        <label class="tw-block tw-text-sm tw-font-semibold">Surah:</label>
        <select name="surah" class="tw-border tw-rounded tw-px-2 tw-py-1">
          <option value="">All</option>

          <% @presenter.segmented_surah.each do |s| %>
            <option value="<%= s %>" <%= 'selected' if @presenter.selected_surah.to_s == s.to_s %>>Surah <%= s %></option>
          <% end %>
        </select>
      </div>

      <div class="tw-flex tw-items-end">
        <button type="submit" class="btn btn-info">Filter</button>
      </div>
    <% end %>
  </div>

  <div class="page-section tw-mt-4">
    <h1 class="tw-text-xl tw-font-bold tw-mb-4">Per-Ayah Mistake Report</h1>
    <table class="tw-w-full tw-border-collapse tw-shadow-sm tw-rounded-md">
      <thead>
      <tr class="tw-bg-gray-100 tw-text-left">
        <th class="tw-p-2 tw-border-b">Surah</th>
        <th class="tw-p-2 tw-border-b">Ayah</th>
        <th class="tw-p-2 tw-border-b">Total Mistakes</th>
        <th class="tw-p-2 tw-border-b">Reciters</th>
        <th class="tw-p-2 tw-border-b">Failure Types</th>
      </tr>
      </thead>
      <tbody>
      <% @presenter.ayah_failures.each do |f| %>
        <tr class="tw-border-b hover:tw-bg-gray-50">
          <td class="tw-p-2"><%= f.surah_number %></td>
          <td class="tw-p-2"><%= f.ayah_number %></td>
          <td class="tw-p-2"><%= f.total_failures %></td>
          <td class="tw-p-2"><%= f.reciters %></td>
          <td class="tw-p-2"><%= f.failure_types %></td>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>
</div>