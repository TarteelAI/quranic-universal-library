m = Mushaf.find(2)

page_glyphs = []

1.upto(m.pages_count) do |page|
  chars = MushafWord.where(page_number: page, mushaf_id: m.id).pluck(:text)

  chars = chars.map(&:chars).flatten
  page_glyphs << chars.map do |char|
    ("U+"+char.ord.to_s(16)).upcase
  end
end

glyphs_to_add = "U+0000,U+000D,U+0020,U+0021,U+0022,U+0023,U+0024,U+0025,U+0026,U+0027,U+0028,U+0029,U+002A,U+002B,U+002C,U+002D,U+002E,U+002F,U+0030,U+0031,U+0032,U+0033,U+0034,U+0035,U+0036,U+0037,U+0038,U+0039,U+003A,U+003B,U+003C,U+003D,U+003E,U+003F,U+0040,U+0041,U+0042,U+0043,U+0044,U+0045,U+0046,U+0047,U+0048,U+0049,U+004A,U+004B,U+004C,U+004D,U+004E,U+004F,U+0050,U+0051,U+0052,U+0053,U+0054,U+0055,U+0056,U+0057,U+0058,U+0059,U+005A,U+005B,U+005C,U+005D,U+005E,U+005F,U+0060,U+0061,U+0062,U+0063,U+0064,U+0065,U+0066,U+0067,U+0068,U+0069,U+006A,U+006B,U+006C,U+006D,U+006E,U+006F,U+0070,U+0071,U+0072,U+0073,U+0074,U+0075,U+0076,U+0077,U+0078,U+0079,U+007A,U+007B,U+007C,U+007D,U+007E,U+007F,U+00A0,U+00A1,U+00A2,U+00A3,U+00A4,U+00A5,U+00A6,U+00A7,U+00A8,U+00A9,U+00AA,U+00AB,U+00AC,U+00AD,U+00AE,U+00AF,U+00B0,U+00B1,U+00B2,U+00B3,U+00B4,U+00B5,U+00B6,U+00B8,U+00B9,U+00BA,U+00BB,U+00BC,U+00BD,U+00BE,U+00BF,U+00C0,U+00C1,U+00C2,U+00C3,U+00C4,U+00C5,U+00C6,U+00C7,U+00C8,U+00C9,U+00CA,U+00CB,U+00CC,U+00CD,U+00CE,U+00CF,U+00D0,U+00D1,U+00D2,U+00D3,U+00D4,U+00D5,U+062F,U+0630,U+0631,U+0632,U+0633,U+0634,U+0635,U+0636,U+0637,U+0638,U+0639,U+063A,U+0640,U+0641,U+0642,U+0643,U+0644,U+0645,U+0646,U+0647,U+0648,U+0649,U+064A,U+06C0,U+06C1,U+06C2,U+06D5,U+FC25,U+FEA9,U+FEAB,U+FEAD,U+FEAF,U+FEB1,U+FEB5,U+FEB9,U+FEBD,U+FEC1,U+FEC5,U+FEC9,U+FECD,U+FED1,U+FED5,U+FED9,U+FEDD,U+FEE1,U+FEE5,U+FEE9,U+FEED,U+FEEF,U+FEF1".split(',')
File.open("scripts/unicodes.txt", "wb") do |f|
  page_glyphs.each do |line|
    f.puts (glyphs_to_add + line).uniq.join(',')
  end
end
